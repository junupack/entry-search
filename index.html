# entry-search
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì—”íŠ¸ë¦¬ ìœ ì € ê²€ìƒ‰ê¸°</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    input, button { font-size: 16px; padding: 8px; }
    .user-link {
      display: block;
      margin: 10px 0;
      color: blue;
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <h2>ğŸ” ì—”íŠ¸ë¦¬ ìœ ì € ê²€ìƒ‰ê¸°</h2>
  <input type="text" id="nickname" placeholder="ë‹‰ë„¤ì„ ì…ë ¥" />
  <button id="searchBtn">ê²€ìƒ‰</button>
  <div id="result" style="margin-top: 20px;"></div>

  <script>
    // ê°„ë‹¨ ìœ ì‚¬ë„: ì•ê¸€ì ì¼ì¹˜ ê°œìˆ˜
    function similarity(a, b) {
      a = a.toLowerCase();
      b = b.toLowerCase();
      let matches = 0;
      for (let i = 0; i < Math.min(a.length, b.length); i++) {
        if (a[i] === b[i]) matches++;
        else break; // ì—°ì†í•´ì„œ ì¼ì¹˜í•´ì•¼ í•˜ë¯€ë¡œ ì—¬ê¸°ì„œ ëŠê¸°
      }
      return matches;
    }

    const btn = document.getElementById('searchBtn');
    const input = document.getElementById('nickname');
    const resultBox = document.getElementById('result');

    async function searchUser() {
      const nickname = input.value.trim();
      if (!nickname) {
        resultBox.textContent = 'â— ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.';
        return;
      }

      btn.disabled = true;
      resultBox.textContent = 'ğŸ” ê²€ìƒ‰ ì¤‘...';

      const proxy = "https://corsproxy.io/?";
      const url = `https://playentry.org/api/user/find?q=${encodeURIComponent(nickname)}`;

      try {
        const res = await fetch(proxy + url);
        if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);

        const users = await res.json();

        if (!Array.isArray(users) || users.length === 0) {
          resultBox.textContent = "ğŸ˜¢ í•´ë‹¹ ë‹‰ë„¤ì„ì„ ê°€ì§„ ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤.";
          btn.disabled = false;
          return;
        }

        users.sort((a, b) => similarity(b.nickname, nickname) - similarity(a.nickname, nickname));

        resultBox.innerHTML = "<h3>ğŸ”— ìœ ì‚¬ ë‹‰ë„¤ì„ ê²€ìƒ‰ ê²°ê³¼:</h3>";
        users.forEach(user => {
          const link = document.createElement("a");
          link.href = `https://playentry.org/profile/${user._id}`;
          link.textContent = `ğŸ§‘ ${user.nickname}`;
          link.className = "user-link";
          link.target = "_blank";
          resultBox.appendChild(link);
        });
      } catch (err) {
        console.error(err);
        resultBox.textContent = "âš ï¸ ì˜¤ë¥˜ ë°œìƒ (ì¸í„°ë„· ë¬¸ì œ ë˜ëŠ” Entry ì„œë²„ ë¬¸ì œì¼ ìˆ˜ ìˆìŒ)";
      } finally {
        btn.disabled = false;
      }
    }

    btn.addEventListener('click', searchUser);
    input.addEventListener('keydown', e => {
      if (e.key === 'Enter') {
        searchUser();
      }
    });
  </script>
</body>
</html>
