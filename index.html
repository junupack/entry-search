# entry-search
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì—”íŠ¸ë¦¬ ìœ ì € ê²€ìƒ‰ê¸°</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    input, button { font-size: 16px; padding: 8px; }
    .user-link {
      display: block;
      margin: 10px 0;
      color: blue;
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <h2>ğŸ” ì—”íŠ¸ë¦¬ ìœ ì € ê²€ìƒ‰ê¸°</h2>
  <input type="text" id="nickname" placeholder="ë‹‰ë„¤ì„ ì…ë ¥">
  <button onclick="searchUser()">ê²€ìƒ‰</button>
  <div id="result" style="margin-top: 20px;"></div>

  <script>
    function similarity(a, b) {
      a = a.toLowerCase();
      b = b.toLowerCase();
      let matches = 0;
      for (let i = 0; i < Math.min(a.length, b.length); i++) {
        if (a[i] === b[i]) matches++;
      }
      return matches;
    }

    function searchUser() {
      const nickname = document.getElementById("nickname").value.trim();
      const resultBox = document.getElementById("result");
      resultBox.innerHTML = "ğŸ” ê²€ìƒ‰ ì¤‘...";

      // âš  CORS í”„ë¡ì‹œ ì£¼ì†Œ (í…ŒìŠ¤íŠ¸ìš©)
      const proxy = "https://corsproxy.io/?";
      const url = `https://playentry.org/api/user/find?q=${encodeURIComponent(nickname)}`;

      fetch(proxy + url)
        .then(res => res.json())
        .then(users => {
          if (users.length === 0) {
            resultBox.innerHTML = "ğŸ˜¢ í•´ë‹¹ ë‹‰ë„¤ì„ì„ ê°€ì§„ ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤.";
            return;
          }

          // ìœ ì‚¬ë„ ê¸°ì¤€ ì •ë ¬
          users.sort((a, b) => similarity(b.nickname, nickname) - similarity(a.nickname, nickname));

          resultBox.innerHTML = "<h3>ğŸ”— ìœ ì‚¬ ë‹‰ë„¤ì„ ê²€ìƒ‰ ê²°ê³¼:</h3>";
          users.forEach(user => {
            const link = document.createElement("a");
            link.href = `https://playentry.org/profile/${user._id}`;
            link.textContent = `ğŸ§‘ ${user.nickname}`;
            link.className = "user-link";
            link.target = "_blank";
            resultBox.appendChild(link);
          });
        })
        .catch(err => {
          console.error(err);
          resultBox.innerHTML = "âš ï¸ ì˜¤ë¥˜ ë°œìƒ (ì¸í„°ë„· ë¬¸ì œ ë˜ëŠ” Entry ì„œë²„ ë¬¸ì œì¼ ìˆ˜ ìˆìŒ)";
        });
    }
  </script>
</body>
</html>
